{% extends 'base.html' %}

{% block title %}Draw Pixel Art{% endblock %}

{% block content %}
    <h1>Draw Pixel Art</h1>

    <div>
        <label for="displaySelect">Display:</label>
        <select id="displaySelect" onchange="onDisplayChange()">
            {% for display in displays %}
                <option value="{{ loop.index0 }}">{{ display.name }}</option>
            {% endfor %}
        </select>
        <span id="maxResolution" style="margin-left: 10px;"></span>
    </div>
    <br>

    <div>
        <label for="width">Width:</label>
        <input type="number" id="width" value="32" min="1" max="128">
        <label for="height">Height:</label>
        <input type="number" id="height" value="32" min="1" max="128">
        <button onclick="resizeCanvas()">Resize</button>
    </div>
    <br>

    <div>
        <label for="zoom">Zoom (Pixel Size):</label>
        <input type="range" id="zoom" min="1" max="30" value="10" oninput="updateZoom(this.value)">
        <span id="zoomValue">10</span>
    </div>
    <br>

    <div>
        <label for="scrollDirection">Scroll Direction:</label>
        <select id="scrollDirection">
            <option value="none">None</option>
            <option value="left">Left</option>
            <option value="right">Right</option>
            <option value="up">Up</option>
            <option value="down">Down</option>
        </select>

        <label for="scrollSpeed">Speed (px/s):</label>
        <input type="number" id="scrollSpeed" value="0" min="0" max="100">
    </div>
    <br>

    <div>
        <label for="color">Color:</label>
        <input type="color" id="color" value="#000000">
        <button onclick="setColor('#000000')">Black</button>
        <button onclick="setColor('#FFFFFF')">White</button>
        <button onclick="setColor('#FF0000')">Red</button>
        <button onclick="setColor('#00FF00')">Green</button>
        <button onclick="setColor('#0000FF')">Blue</button>
    </div>
    <br>
    <canvas id="pixelCanvas" width="320" height="320" style="border:1px solid #000; cursor: crosshair;"></canvas>
    <br>
    <button onclick="saveImage()">Save</button>

    <script>
        window.FPAC = {
            displays: {{ displays|tojson|safe }},
            routes: {
                saveDrawing: "{{ url_for('save_drawing') }}",
                index: "{{ url_for('index') }}"
            }
        };
    </script>
    <script src="{{ url_for('static', filename='js/draw.js') }}"></script>
{% endblock %}
